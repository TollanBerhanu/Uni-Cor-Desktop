<!--begin::Card-->
<div class="card card-custom main_content">
    <!-- <div class="card-header flex-wrap border-0 pt-6 pb-0">
        <div class="card-title">
            <h5>Search:
            <span class="d-block text-muted pt-2 font-size-sm">Search for exams</span>
            </h5> 
        </div>
        <div class="card-body">
        </div>
        <div class="card-toolbar">
        </div>
  </div> -->
           <!--begin: Search Form-->
       <form method="POST" enctype="multipart/form-data" class="search_form">
           <div class="mb-7">
               <div class="row align-items-center">
                   <div class="col-lg-9 col-xl-8">
                       <div class="row align-items-center">
                           <div class="col-md-4 my-2 my-md-0">
                                <div class="d-flex align-items-center">
                                    <label class="mr-2 mb-0 d-none d-md-block">Search:</label>
                                    <div class="input-icon">
                                        <input type="text" class="form-control" placeholder="Search..." id="kt_datatable_search_query_exams" />
                                        <span>
                                            <i class="flaticon2-search-1 text-muted"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                           <div class="col-md-3 my-2 my-md-0">
                               <div class="d-flex align-items-center">
                                   <label class="mr-3 mb-0 d-none d-md-block">Status:</label>
                                   <select class="form-control" id="kt_datatable_search_status_exams">
                                       <option value="">All</option>
                                       <option value="1">Completed</option>
                                       <option value="2">Draft</option>
                                   </select>
                               </div>
                           </div>
                           <div class="col-md-3 my-2 my-md-0">
                               <div class="d-flex align-items-center">
                                   <label class="mr-3 mb-0 d-none d-md-block">Type:</label>
                                   <select class="form-control" id="kt_datatable_search_type_exams">
                                       <option value="">All</option>
                                       <option value="1">Mid Exam</option>
                                       <option value="2">Final Exam</option>
                                       <option value="3">Other</option>
                                   </select>
                               </div>
                           </div>
                           <!-- <div class="col-md-4 my-2 my-md-0">
                            <div class="d-flex align-items-center">
                                <label class="mr-3 mb-0 d-none d-md-block">Type:</label>
                                <div class="dropdown bootstrap-select form-control">
                                <select class="form-control" id="kt_datatable_search_type_examsss" tabindex="-98">
                                    <option value="">All</option>
                                    <option value="1">Mid Exam</option>
                                    <option value="2">Final Exam</option>
                                    <option value="3">Other</option>
                                </select>
                                <button type="button" class="btn dropdown-toggle btn-light bs-placeholder" data-toggle="dropdown" role="combobox" aria-owns="bs-select-2" aria-haspopup="listbox" aria-expanded="false" data-id="kt_datatable_search_type" title="All"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner">All</div></div> </div></button><div class="dropdown-menu "><div class="inner show" role="listbox" id="bs-select-2" tabindex="-1"><ul class="dropdown-menu inner show" role="presentation"></ul></div></div></div>
                            </div>
                            </div> -->
                       </div>
                   </div>
                   <div class="col-lg-2 col-xl-4 mt-5 mt-lg-0" style="margin-left:-100px;">
                       <button class="btn btn-light-primary px-6 font-weight-bold">
                           Search
                       </button>
                   </div>
                   <a routerLink="/create-exam" class="btn btn-primary font-weight-bolder" style="position: absolute; right: 40px;">
                        <span class="svg-icon svg-icon-md">
                            <!-- <i class="menu-icon flaticon-folder-1"></i> -->
                            <i class="menu-icon flaticon2-plus-1"></i>
                        </span>
                        Create New Exam
                    </a>
               </div>
           </div>
       </form>
           <!--end::Search Form-->
   
<div class="row">
    <div class="col-lg-11">
<!--begin: Datatable-->
<table class="datatable datatable-bordered datatable-head-custom main_content_table" id="kt_datatable_exams">
    <thead class="table_header">
        <tr>
            <!-- <th title="{{ examTable.no }}" style="width: 20px !important;"> {{ examTable.no}} </th> -->
            <th title="{{ examTable.name }}"> {{ examTable.name }} </th>
            <!-- <th title="{{ examTable.id }}"> {{ examTable.id }} </th> -->
            <th title="{{ examTable.type }}"> {{ examTable.type }} </th>
            <th title="{{ examTable.date }}"> {{ examTable.date }} </th>
            <th title="{{ examTable.course }}"> {{ examTable.course }} </th>
            <th title="{{ examTable.code }}"> {{ examTable.code }} </th>
            <th title="{{ examTable.status }}"> {{ examTable.status }} </th>
            <!-- <th title="{{ examTable.description }}"> {{ examTable.description }} </th> -->
        </tr>
    </thead>
    <tbody class="table_body">
        <tr class="dt_row" *ngFor="let exam of exams; let i = index">
            <!-- <td style="width: 20px !important;">{{ i+1 }} </td> -->
            <td>{{ exam.examname }}</td>
            <!-- <td>ExId</td> -->
            <td>{{ (exam.examtype==='mid')?'1':(exam.examtype==='final')?'2':'3' }}</td>
            <td>{{ exam.examdate }}</td>
            <td>{{ courseName }}</td>
            <td>{{ courseCode }}</td>
            <td>1</td>
            <!-- <td>1</td> -->
     </tr>
 </tbody>
 </table>
 <!--end: Datatable-->
    </div>
    <div class="col-md-1">
        <table class="table action_table">
            <thead>
              <tr>
                <th scope="col" class="thead action_table_head">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr class="dt_row" *ngFor="let exam of exams; let i = index">
                <td class="action_table_body">
                    <i routerLink="/edit-exam" (click)="editExam(i)" title="Edit Exam" class="menu-icon flaticon2-pen icon_link edit_exam"></i>
                    <i title="Delete Exam" class="menu-icon flaticon-delete icon_link delete_exam"  data-toggle="modal" data-target="#deleteModal"></i>
                    <i title="Generate Question Sheet" (click)="generateSheet(i, 'qs')" class="menu-icon flaticon-notes icon_link generate_ans_sheet" data-toggle="modal" data-target="#exampleModalLong"></i>
                    <i title="Generate Answer Sheet" (click)="generateSheet(i, 'as')" class="menu-icon flaticon2-paper icon_link generate_ans_sheet" data-toggle="modal" data-target="#exampleModalLong2"></i>
                </td>
              </tr>
            </tbody>
        </table>
    </div>
</div>










<!-- Delete Modal-->
<div class="modal fade" id="deleteModal" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Delete Exam?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i aria-hidden="true" class="ki ki-close"></i>
                </button>
            </div>
            
            <div class="modal-body">
                Are you sure you want to delete this exam?
                <br><br>
                <button type="button" class="btn btn-light-primary font-weight-bold" data-dismiss="modal">Cancel</button>
                <button type="btn btn-danger" title="Delete Modal" (click)="deleteExam();" class="btn btn-primary font-weight-bold">Delete</button>

            </div>
        </div>
    </div>
</div>




<!-- Modal - Question Sheet -->
<div class="modal fade" id="exampleModalLong" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Question Sheet</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i aria-hidden="true" class="ki ki-close"></i>
                </button>
            </div>
            <div class="modal-body">

                <div id="MyDIv" style="margin-left: 45px;" class="main-container">

                    <div class="col-md-14">
                        <div class="card card-user body-panel">
                            <div class="card-body">
                                <div class="card-header exam_header">
                                    <h3 class="card-title text-center">{{ institutionName }}</h3>
                                    <h4 class="card-title text-center">{{ faculty }}, {{ department }} </h4>
                                    <h4 class="card-title text-center" style="text-transform: capitalize;">{{ courseName }} {{ selectedExam.examtype }} Exam </h4>
                                </div>
                                <table class="table question_sheet">
                                    <!-- Name and ID -->
                                    <thead class="thead">
                                      <tr class="name_id">
                                        <th scope="col">Name: <span class="underline" style="margin-right: 30px;">________________________________________________________</span> ID: <span class="underline">_______________________</span></th>
                                      </tr>
                                    </thead>
                                    <!-- True od False -->
                                    <div *ngIf="selectedExam.exam.content.tf">
                                        <thead class="thead marks">
                                        <tr>
                                            <th class="part_header" scope="col">Part 1: True or False</th>
                                        </tr>
                                        </thead>
                                        <tbody class="marks">
                                        <tr *ngFor="let qn of selectedExam.exam.tf.qn; let i = index">
                                            <td><span class="underline">________</span> {{ i+1 }}. {{ qn }}</td>
                                        </tr>
                                        </tbody> 
                                    </div>
                                    <!-- Choose -->
                                    <div *ngIf="selectedExam.exam.content.choice">
                                        <thead class="thead marks">
                                        <tr>
                                            <th class="part_header" scope="col">Part 2: Choose the best answer from the given alternatives.</th>
                                        </tr>
                                        </thead>
                                        <tbody class="marks">
                                        <tr *ngFor="let qn of selectedExam.exam.choice.qn; let i = index">
                                            <td><span class="underline">________</span> {{ i+1 }}. {{ qn }} <br>
                                                <p style="margin-left: 75px;" *ngFor="let opt of selectedExam.exam.choice.opt[i]; let j = index">
                                                    {{ options[j] }}. {{ opt }}
                                                </p>
                                            </td>
                                        </tr>
                                        </tbody> 
                                    </div>
                                    <!-- Fill -->
                                    <div *ngIf="selectedExam.exam.content.fill">
                                      <thead class="thead marks">
                                        <tr>
                                          <th class="part_header" scope="col">Part 3: Fill in the blank spaces</th>
                                        </tr>
                                      </thead>
                                      <tbody class="marks">
                                        <tr *ngFor="let qn of selectedExam.exam.fill.qn; let i = index">
                                          <td>{{ i+1 }}. <span class="underline"> {{ qn }} </span></td>
                                        </tr>
                                      </tbody>
                                    </div>
                                    <!-- Define -->
                                    <div *ngIf="selectedExam.exam.content.define">
                                      <thead class="thead marks">
                                        <tr>
                                          <th class="part_header" scope="col">Part 4: Define the following terms</th>
                                        </tr>
                                      </thead>
                                      <tbody class="marks">
                                        <tr *ngFor="let qn of selectedExam.exam.define.qn; let i = index">
                                          <td>{{ i+1 }}.  {{ qn }}</td>
                                        </tr>
                                      </tbody>
                                    </div>
                                    <!-- Short Answer -->
                                    <div *ngIf="selectedExam.exam.content.shortans">
                                      <thead class="thead marks">
                                        <tr>
                                          <th class="part_header" scope="col">Part 5: Write short answers for the following questions</th>
                                        </tr>
                                      </thead>
                                      <tbody class="marks">
                                        <tr *ngFor="let qn of selectedExam.exam.shortans.qn; let i = index">
                                          <td>{{ i+1 }}.  {{ qn }}</td>
                                        </tr>
                                      </tbody>
                                    </div>
                                </table>
                                <!-- <div class="print">
                                    <button (click)="onPrint()">Print</button>
                                    all the stuffs I want to print
                                </div> -->
                            </div>
                        </div>
                    </div>
                    </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light-primary font-weight-bold" data-dismiss="modal">Close</button>
                <button type="btn btn-danger" title="Save As PDF" (click)="exportAsPDF('MyDIv');" class="btn btn-primary font-weight-bold">Save As PDF</button>
            </div>
        </div>
    </div>
</div>



<!-- Modal - Answer Sheet -->
<div class="modal fade" id="exampleModalLong2" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Answer Sheet</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i aria-hidden="true" class="ki ki-close"></i>
                </button>
            </div>
            <div class="modal-body">
                
                <div id="AnsSheet">

                <div class="col-md-14">
                    <div class="card card-user body-panel">
                        <div class="card-body">
                            <div class="card-header exam_header">
                                <h4 class="card-title text-center">{{ institutionName }} {{ faculty }}, {{ department }}</h4>
                                    <h4 class="card-title text-center" style="text-transform: capitalize;">{{ courseName }} {{ selectedExam.examtype }} Exam Answer Sheet</h4>
                            </div>
                            <table class="table answer_sheet">
                                <!-- Name and ID -->
                                <thead class="thead">
                                  <tr>
                                    <th class="name_id" scope="col" colspan="2">Name: <span class="underline" style="margin-right: 30px;">________________________________________________________</span> ID: <span class="underline">_______________________</span></th>
                                  </tr>
                                </thead>
                                <!-- True od False -->
                                <div *ngIf="selectedExam.exam.content.tf">
                                    <thead class="thead marks">
                                    <tr>
                                        <th class="part_header" scope="col" colspan="2">Part 1: True or False</th>
                                    </tr>
                                    </thead>
                                    <tbody class="marks">
                                    <tr *ngFor="let ans of selectedExam.exam.tf.ans; let i = index">
                                        <div *ngIf="((i+1)%3===1)">
                                            <td>{{ i+1 }}. <span class="underline">______________</span></td>
                                            <td><span style="margin-left: 100px;"></span>{{ i+2 }}. <span class="underline">______________</span></td>
                                            <td><span style="margin-left: 100px;"></span>{{ i+3 }}. <span class="underline">______________</span></td>
                                        </div>
                                    </tr>
                                    </tbody> 
                                </div>
                                <!-- Choose -->
                                <div *ngIf="selectedExam.exam.content.choice">
                                    <thead class="thead marks">
                                    <tr>
                                        <th class="part_header" scope="col">Part 2: Choose the best answer.</th>
                                    </tr>
                                    </thead>
                                    <tbody class="marks">
                                    <tr *ngFor="let qn of selectedExam.exam.choice.qn; let i = index">
                                        <div *ngIf="((i+1)%3===1)">
                                            <td>{{ i+1 }}. <span class="underline">______________</span></td>
                                            <td><span style="margin-left: 100px;"></span>{{ i+2 }}. <span class="underline">______________</span></td>
                                            <td><span style="margin-left: 100px;"></span>{{ i+3 }}. <span class="underline">______________</span></td>
                                        </div>
                                    </tr>
                                    </tbody> 
                                </div>
                                <!-- Fill -->
                                <div *ngIf="selectedExam.exam.content.fill">
                                  <thead class="thead marks">
                                    <tr>
                                      <th class="part_header" scope="col">Part 3: Fill in the blank spaces</th>
                                    </tr>
                                  </thead>
                                  <tbody class="marks">
                                    <tr *ngFor="let ans of selectedExam.exam.fill.ans; let i = index">
                                      <td>{{ i+1 }}. <span class="underline">_________________________________________________</span></td>
                                    </tr>
                                  </tbody>
                                </div>
                                <!-- Define -->
                                <div *ngIf="selectedExam.exam.content.define">
                                  <thead class="thead marks">
                                    <tr>
                                      <th class="part_header" scope="col">Part 4: Define the following terms</th>
                                    </tr>
                                  </thead>
                                  <tbody class="marks">
                                    <tr *ngFor="let ans of selectedExam.exam.define.ans; let i = index">
                                      <td>{{ i+1 }}.  <span class="underline">______________________________________________________________________________</span>
                                        <br><br><span class="underline">________________________________________________________________________________</span>
                                    </td>
                                    </tr>
                                  </tbody>
                                </div>
                                <!-- Short Answer -->
                                <div *ngIf="selectedExam.exam.content.shortans">
                                  <thead class="thead marks">
                                    <tr>
                                      <th class="part_header" scope="col">Part 5: Write short answers for the following questions</th>
                                    </tr>
                                  </thead>
                                  <tbody class="marks">
                                    <tr *ngFor="let ans of selectedExam.exam.shortans.ans; let i = index">
                                        <td>{{ i+1 }}.  <span class="underline">______________________________________________________________________________</span>
                                        <br><br><span class="underline">________________________________________________________________________________</span>
                                        <br><br><span class="underline">________________________________________________________________________________</span>
                                       
                                    </tr>
                                  </tbody>
                                </div>
                            </table>
                        </div>
                    </div>
                </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light-primary font-weight-bold" data-dismiss="modal">Close</button>
                <button type="btn btn-danger" title="Save As PDF" (click)="exportAsPDF('AnsSheet');" class="btn btn-primary font-weight-bold">Save As PDF</button>
            </div>
        </div>
    </div>
</div>

</div>
<!--end::Card-->